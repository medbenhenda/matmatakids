{% extends 'base.html.twig' %}

{% block title %}Case {{ item }}{% endblock %}

{% block body %}
{% set status = 'activate' %}
{% set action = 1 %}
{% if item.status %}
  {% set status = 'disable' %}
 {% set action = 0 %}
{% endif %}
{% set iconAffected = 'fas fa-exclamation-triangle' %}
{% set colorAffected = 'red' %}
{% if item.affected %}
  {% set iconAffected = 'fas fa-check-circle' %}
  {% set colorAffected = 'green' %}
{% endif %}

{% set iconStatus = 'fas fa-exclamation-triangle' %}
{% set colorStatus = 'red' %}
{% if item.status %}
  {% set iconStatus = 'fas fa-check-circle' %}
  {% set colorStatus = 'green' %}
{% endif %}
<div id="layoutSidenav_content">
    <main>
        <div class="container-fluid">
            <h1 class="mt-4">Cases</h1>
            <ol class="breadcrumb mb-4">
                <li class="breadcrumb-item active">Case : {{ item }}</li>
            </ol>
            <div class="card mb-4">
            <div class="d-flex flex-row-reverse bd-highlight mb-2">
              <div class="p-2 bd-highlight"><a href="#">statistics</a></div>
              <div class="p-2 bd-highlight"><a href="{{path('case')}}">Cases list</a></div>
              <div class="p-2 bd-highlight"><a href="{{path('new_case')}}">New Case</a></div>
            </div>
            <div class="card-header">
            <div class="row">
                <div class="col-sm-6">
                    <i class="fas fa-briefcase mr-1"></i>Case NÂ° {{ item }}
                </div>
                <div class="col-sm-6">
                <div class="float-right">
                    <span style="font-size: 1em; color: {{colorStatus}};">
                        Status : <i class="{{ iconStatus }}"></i>
                    </span>

                    <span style="font-size: 1em; color: {{colorAffected}};">
                        Affectation : <i class="{{ iconAffected }}"></i>
                    </span>
                    </div>
                </div>
                </div>
            </div>
                <div class="row">
                    <div class="col-sm-12">
                    <div class="card-body">
                        <div class="text-right col-md-12">
                        {%if action == 0%}<a href="{{path('affect_sponsor_case', {case: item.id})}}"><button type="button" class="btn btn-success">Affect to sponsor</button></a>{%endif%}
                        <a href="{{path('manage_case', {case: item.id, status: action})}}"><button type="button" class="btn btn-info">{{ status|capitalize }}</button></a>
                        </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-sm-8">
                        <div class="card-body row">
                            <div class="mb-3 col-sm-6">
                                  <div class="card bg-light ">
                                      <div class="card-header">
                                          <div class="row">
                                              <div class="text-left col-md-6"><p class="nav-link">Contact</p></div>
                                              <div class="text-right col-md-6"><a class="nav-link active" href="{{path('edit_case', {case: item.id})}}">Edit</a></div>
                                          </div>
                                      </div>
                                      <div class="card-body">
                                        First name: {{ item.firstName }}<br/>
                                        Last name: {{ item.lastName }}<br/>
                                        Address: {{ item.address }}<br/>
                                        Mobile: {{ item.mobile }}<br/>
                                        Email: {{ item.email }}<br/>
                                      </div>
                                  </div>
                              </div>

                              <div class="mb-3 col-sm-6">

                              </div>
                          </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="card-body ">
                            <div class="card text-white bg-info mb-3 text-left">
                                <div class="card-header">
                                Description
                                </div>
                                <div class="card-body">
                                  <h5 class="card-title">{{item.firstName ~ ' ' ~ item.lastName }}</h5>
                                  <p>{{item.address }}</p>
                                  <p class="card-text">{{item.details}}</p>


                                  <div class="card" style="width: 100%;">
                                      <ul class="list-group list-group-flush">
                                          {%for proof in item.proof %}
                                              <li class="list-group-item">  {{proof.title}}<br><img src="{{ vich_uploader_asset(proof, 'imageFile', 'App\\Entity\\Document') }}" class="img-thumbnail" alt="{{ proof.title }}" /></li>
                                          {%endfor%}
                                      </ul>
                                  </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

</div>
{% endblock %}
